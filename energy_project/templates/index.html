<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Energy Consumption Predictor</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body { background: #0f172a; color: #e2e8f0; }
    .card { border: 0; border-radius: 1rem; box-shadow: 0 10px 30px rgba(0,0,0,.25); }
    .form-label { font-weight: 600; }
    .brand { font-weight: 800; letter-spacing: .5px; }
    .muted { color: #94a3b8; }
    a, a:visited { color: #93c5fd; }
  </style>
</head>
<body>
  <div class="container py-5">
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <div class="text-center mb-4">
          <h1 class="brand">üè† Energy Consumption Predictor</h1>
          <p class="muted">Enter your building details and get an instant consumption estimate.</p>
        </div>

        <!-- Result Alert -->
        <div id="result" class="alert d-none" role="alert"></div>

        <div class="card bg-dark text-light">
          <div class="card-body p-4 p-md-5">
            <!-- Fallback action + JS enhancement -->
            <form id="predict-form" action="/predict_charges" method="POST" novalidate>
              <div class="row g-3">
                <div class="col-md-6">
                  <label for="Square_Footage" class="form-label">Square Footage</label>
                  <input type="number" step="1" min="0" class="form-control" id="Square_Footage" name="Square_Footage" placeholder="e.g., 1200" required />
                </div>
                <div class="col-md-6">
                  <label for="Number_of_Occupants" class="form-label">Number of Occupants</label>
                  <input type="number" step="1" min="0" class="form-control" id="Number_of_Occupants" name="Number_of_Occupants" placeholder="e.g., 4" required />
                </div>

                <div class="col-md-6">
                  <label for="Appliances_Used" class="form-label">Appliances Used (count)</label>
                  <input type="number" step="1" min="0" class="form-control" id="Appliances_Used" name="Appliances_Used" placeholder="e.g., 15" required />
                </div>
                <div class="col-md-6">
                  <label for="Average_Temperature" class="form-label">Average Temperature (¬∞C)</label>
                  <input type="number" step="0.1" class="form-control" id="Average_Temperature" name="Average_Temperature" placeholder="e.g., 26.5" required />
                </div>

                <div class="col-md-6">
                  <label for="Day_of_Week" class="form-label">Day of Week</label>
                  <select class="form-select" id="Day_of_Week" name="Day_of_Week" required>
                    <option value="" selected disabled>Choose‚Ä¶</option>
                    <option>Weekday</option>
                    <option>Weekend</option>
                </select>
                </div>

                <div class="col-md-6">
                  <label for="Building_Type" class="form-label">Building Type</label>
                  <select class="form-select" id="Building_Type" name="Building_Type" required>
                    <option value="" selected disabled>Choose‚Ä¶</option>
                    <option>Residential</option>
                    <option>Commercial</option>
                    <option>Industrial</option>
                    
                  </select>
                </div>

                <div class="col-12 d-grid">
                  <button class="btn btn-primary btn-lg" type="submit">Predict Consumption</button>
                </div>
              </div>
            </form>
          </div>
        </div>

        <p  style="text-align:center; font-size: 24px; font-style: italic;">Flask & Machine Learning </p>
      </div>
    </div>
  </div>

  <script>
    const form = document.getElementById('predict-form');
    const resultBox = document.getElementById('result');

    form.addEventListener('submit', async (e) => {
      // Enhance with AJAX; keep normal post as fallback if fetch fails
      e.preventDefault();
      resultBox.classList.add('d-none');
      resultBox.classList.remove('alert-success', 'alert-danger');

      const formData = new FormData(form);

      try {
        const res = await fetch('/predict_charges', {
          method: 'POST',
          body: formData
        });

        if (!res.ok) throw new Error('Network response was not ok');
        const data = await res.json();
        resultBox.textContent = data.Result ?? 'Prediction complete.';
        resultBox.classList.add('alert', 'alert-success');
        resultBox.classList.remove('d-none');
      } catch (err) {
        resultBox.textContent = 'Something went wrong while predicting. Please try again.';
        resultBox.classList.add('alert', 'alert-danger');
        resultBox.classList.remove('d-none');
      }
    });
  </script>
</body>
</html>
